# Secret for S3 credentials
{{- if .Values.transporter.storage.s3 }}
apiVersion: v1
kind: Secret
metadata:
  name: aws-s3-credentials
  namespace: {{ .Values.tasks.namespace }}
data:
  {{- if .Values.transporter.storage.s3.awsDefaultRegion }}
  AWS_DEFAULT_REGION: {{ .Values.transporter.storage.s3.awsDefaultRegion | b64enc | quote }}
  {{- end }}
  {{- if .Values.transporter.storage.s3.awsAccessKeyId }}
  AWS_ACCESS_KEY_ID: {{ .Values.transporter.storage.s3.awsAccessKeyId | b64enc | quote }}
  {{- end }}
  {{- if .Values.transporter.storage.s3.awsSecretAccessKey }}
  AWS_SECRET_ACCESS_KEY: {{ .Values.transporter.storage.s3.awsSecretAccessKey | b64enc | quote }}
  {{- end }}
{{- end -}}
